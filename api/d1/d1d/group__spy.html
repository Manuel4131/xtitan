<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>xTitan: Spy Library</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">xTitan
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Groups</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Spy Library</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gafdcab9b01ccd048de8969d94ea2dbc0f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d1d/group__spy.html#gafdcab9b01ccd048de8969d94ea2dbc0f">spyInput</a>&#160;&#160;&#160;xtitan::detail::SpyInput(<a class="el" href="../../d1/d1d/group__spy.html#gaccaedcd1e6b88b599ec13673cd2509fc">spyGetToken</a>(this).toUtf8(),__FUNCTION__)</td></tr>
<tr class="memdesc:gafdcab9b01ccd048de8969d94ea2dbc0f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Records function call.  <a href="#gafdcab9b01ccd048de8969d94ea2dbc0f">More...</a><br/></td></tr>
<tr class="separator:gafdcab9b01ccd048de8969d94ea2dbc0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9c33b625356b0a2454a6ae6b4f8a37b6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d1d/group__spy.html#ga9c33b625356b0a2454a6ae6b4f8a37b6">spyCheck</a>&#160;&#160;&#160;xtitan::detail::SpyCheck(__FILE__,__LINE__)</td></tr>
<tr class="memdesc:ga9c33b625356b0a2454a6ae6b4f8a37b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates synchronized check point.  <a href="#ga9c33b625356b0a2454a6ae6b4f8a37b6">More...</a><br/></td></tr>
<tr class="separator:ga9c33b625356b0a2454a6ae6b4f8a37b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab8134bc97058330b46aa8a96787f74f1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d1d/group__spy.html#gab8134bc97058330b46aa8a96787f74f1">spyAsyncCheck</a>&#160;&#160;&#160;xtitan::detail::SpyAsyncCheck(__FILE__,__LINE__)</td></tr>
<tr class="memdesc:gab8134bc97058330b46aa8a96787f74f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates asynchronized check point.  <a href="#gab8134bc97058330b46aa8a96787f74f1">More...</a><br/></td></tr>
<tr class="separator:gab8134bc97058330b46aa8a96787f74f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaf897823f6a83b8b26a73d2da176698ba"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d1d/group__spy.html#gaf897823f6a83b8b26a73d2da176698ba">spyRegisterObject</a> (QObject *object, const QString &amp;id)</td></tr>
<tr class="memdesc:gaf897823f6a83b8b26a73d2da176698ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register object for record/replay.  <a href="#gaf897823f6a83b8b26a73d2da176698ba">More...</a><br/></td></tr>
<tr class="separator:gaf897823f6a83b8b26a73d2da176698ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaccaedcd1e6b88b599ec13673cd2509fc"><td class="memItemLeft" align="right" valign="top">QString&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d1d/group__spy.html#gaccaedcd1e6b88b599ec13673cd2509fc">spyGetToken</a> (QObject *object)</td></tr>
<tr class="memdesc:gaccaedcd1e6b88b599ec13673cd2509fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get ID of a registered object.  <a href="#gaccaedcd1e6b88b599ec13673cd2509fc">More...</a><br/></td></tr>
<tr class="separator:gaccaedcd1e6b88b599ec13673cd2509fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaeb4d13af0f2d796ea7c2d7732fb0a279"><td class="memItemLeft" align="right" valign="top">QObject *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d1d/group__spy.html#gaeb4d13af0f2d796ea7c2d7732fb0a279">spyGetObject</a> (const QString &amp;token)</td></tr>
<tr class="memdesc:gaeb4d13af0f2d796ea7c2d7732fb0a279"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a registered object by ID.  <a href="#gaeb4d13af0f2d796ea7c2d7732fb0a279">More...</a><br/></td></tr>
<tr class="separator:gaeb4d13af0f2d796ea7c2d7732fb0a279"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf807cf9dc9b94d113b5391536a559e7d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d1d/group__spy.html#gaf807cf9dc9b94d113b5391536a559e7d">spyTryTestAutomation</a> ()</td></tr>
<tr class="memdesc:gaf807cf9dc9b94d113b5391536a559e7d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start record/replay.  <a href="#gaf807cf9dc9b94d113b5391536a559e7d">More...</a><br/></td></tr>
<tr class="separator:gaf807cf9dc9b94d113b5391536a559e7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga041506954b48f99c57dc8f70b6a6b2da"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d1d/group__spy.html#ga041506954b48f99c57dc8f70b6a6b2da">spyIsTesting</a> ()</td></tr>
<tr class="memdesc:ga041506954b48f99c57dc8f70b6a6b2da"><td class="mdescLeft">&#160;</td><td class="mdescRight">record/replay is start or not  <a href="#ga041506954b48f99c57dc8f70b6a6b2da">More...</a><br/></td></tr>
<tr class="separator:ga041506954b48f99c57dc8f70b6a6b2da"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="gab8134bc97058330b46aa8a96787f74f1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define spyAsyncCheck&#160;&#160;&#160;xtitan::detail::SpyAsyncCheck(__FILE__,__LINE__)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates asynchronized check point. </p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="../../d1/d1d/group__spy.html#ga9c33b625356b0a2454a6ae6b4f8a37b6" title="Creates synchronized check point. ">spyCheck</a></dd></dl>
<p>Similar to spyCheck, except that check points can reorder. Because execution order may randomly interleave in multi-thread context, you must use this macro in concurrent functions.</p>
<p>To distinguish individual execution order in each threads, you must specify ID and precondition to each check points. ID should be a string. Use id() to specify ID, and pre() to specify precondition, for example:</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> ConcurrentJob::run() {</div>
<div class="line">    <span class="keywordtype">int</span> i = 0;</div>
<div class="line">    <span class="comment">// some logic</span></div>
<div class="line">    <a class="code" href="../../d1/d1d/group__spy.html#gab8134bc97058330b46aa8a96787f74f1" title="Creates asynchronized check point. ">spyAsyncCheck</a>.id(<span class="stringliteral">&quot;id1&quot;</span>) % i;</div>
<div class="line">    <span class="comment">// some logic</span></div>
<div class="line">    <a class="code" href="../../d1/d1d/group__spy.html#gab8134bc97058330b46aa8a96787f74f1" title="Creates asynchronized check point. ">spyAsyncCheck</a>.id(<span class="stringliteral">&quot;id2&quot;</span>).pre(<span class="stringliteral">&quot;id1&quot;</span>) % i;</div>
<div class="line">    <span class="comment">// some logic</span></div>
<div class="line">    <a class="code" href="../../d1/d1d/group__spy.html#gab8134bc97058330b46aa8a96787f74f1" title="Creates asynchronized check point. ">spyAsyncCheck</a>.id(<span class="stringliteral">&quot;id3&quot;</span>).pre(<span class="stringliteral">&quot;id2&quot;</span>) % i;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a class="anchor" id="ga9c33b625356b0a2454a6ae6b4f8a37b6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define spyCheck&#160;&#160;&#160;xtitan::detail::SpyCheck(__FILE__,__LINE__)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates synchronized check point. </p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="../../d1/d1d/group__spy.html#gab8134bc97058330b46aa8a96787f74f1" title="Creates asynchronized check point. ">spyAsyncCheck</a></dd></dl>
<p>This macro creates a synchronized check point, which can record variables or function results while recording, and compares their values in each replay. After replay, if check point sequence mismatched (either by reordering, missing or duplicating), then this replay was failed.</p>
<p>To use this macro record variables, simply put variables with <b>operator %</b>, but variable type must be one of</p>
<ul>
<li>bool</li>
<li>int64_t</li>
<li>double</li>
<li>std::string</li>
<li>std::wstring</li>
</ul>
<p>or any other types which can implicitly convert to these types.</p>
<p>For example:</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> Job::doSomething() {</div>
<div class="line">    <span class="keywordtype">int</span> i = 0;</div>
<div class="line">    <span class="comment">// after some logic, you want to check variable i and member variable name</span></div>
<div class="line">    <a class="code" href="../../d1/d1d/group__spy.html#ga9c33b625356b0a2454a6ae6b4f8a37b6" title="Creates synchronized check point. ">spyCheck</a> % i % this-&gt;name;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a class="anchor" id="gafdcab9b01ccd048de8969d94ea2dbc0f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define spyInput&#160;&#160;&#160;xtitan::detail::SpyInput(<a class="el" href="../../d1/d1d/group__spy.html#gaccaedcd1e6b88b599ec13673cd2509fc">spyGetToken</a>(this).toUtf8(),__FUNCTION__)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Records function call. </p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="../../d1/d1d/group__spy.html#gaf897823f6a83b8b26a73d2da176698ba" title="Register object for record/replay. ">spyRegisterObject</a></dd></dl>
<p>This macro records function call, so that test driver can replay this function later. The function being recording <b>MUST</b> match following rules:</p>
<ol type="1">
<li>This function is a <b>Qt slot</b> or <b>Q_INVOKABLE</b> decorated.</li>
<li>The instance is <b>registered</b> by spyRegisterObject.</li>
<li>This function is a <b>public</b> method (i.e. not private or protected).</li>
<li>All parameters either are <b>one of</b> these types or can <b>implicitly convert</b> to these types:<ul>
<li>bool</li>
<li>int64_t</li>
<li>double</li>
<li>std::string</li>
<li>std::wstring</li>
</ul>
</li>
</ol>
<p>To use this macro is quite simple, just put this macro in your function (generally at first line), and concat all parameters with <b>operator %</b>.</p>
<p>Following example explains how to use spyInput:</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> Dialog::showResult(<span class="keywordtype">int</span> code, <span class="keyword">const</span> std::wstring &amp; message) {</div>
<div class="line">    <a class="code" href="../../d1/d1d/group__spy.html#gafdcab9b01ccd048de8969d94ea2dbc0f" title="Records function call. ">spyInput</a> % code % message;</div>
<div class="line">    <span class="comment">// regular code</span></div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gaeb4d13af0f2d796ea7c2d7732fb0a279"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QObject* spyGetObject </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>token</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a registered object by ID. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">token</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>object that ID is <code>token</code> </dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="../../d1/d1d/group__spy.html#gaccaedcd1e6b88b599ec13673cd2509fc" title="Get ID of a registered object. ">spyGetToken</a> <a class="el" href="../../d1/d1d/group__spy.html#gaf897823f6a83b8b26a73d2da176698ba" title="Register object for record/replay. ">spyRegisterObject</a></dd></dl>
<p>This function can retrive object which registered by spyRegisterObject. </p>

</div>
</div>
<a class="anchor" id="gaccaedcd1e6b88b599ec13673cd2509fc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QString spyGetToken </td>
          <td>(</td>
          <td class="paramtype">QObject *&#160;</td>
          <td class="paramname"><em>object</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get ID of a registered object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">object</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ID of <code>object</code> </dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="../../d1/d1d/group__spy.html#gaeb4d13af0f2d796ea7c2d7732fb0a279" title="Get a registered object by ID. ">spyGetObject</a> <a class="el" href="../../d1/d1d/group__spy.html#gaf897823f6a83b8b26a73d2da176698ba" title="Register object for record/replay. ">spyRegisterObject</a></dd></dl>
<p>This function can retrive ID which registered by spyRegisterObject. </p>

</div>
</div>
<a class="anchor" id="ga041506954b48f99c57dc8f70b6a6b2da"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool spyIsTesting </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>record/replay is start or not </p>
<dl class="section return"><dt>Returns</dt><dd>true if started </dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="../../d1/d1d/group__spy.html#gaf807cf9dc9b94d113b5391536a559e7d" title="Start record/replay. ">spyTryTestAutomation</a> </dd></dl>

</div>
</div>
<a class="anchor" id="gaf897823f6a83b8b26a73d2da176698ba"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void spyRegisterObject </td>
          <td>(</td>
          <td class="paramtype">QObject *&#160;</td>
          <td class="paramname"><em>object</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register object for record/replay. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">object</td><td>object being register </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">id</td><td>unique ID for this object </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="../../d1/d1d/group__spy.html#gafdcab9b01ccd048de8969d94ea2dbc0f" title="Records function call. ">spyInput</a></dd></dl>
<p>If <code>object</code> is nullptr, or <code>id</code> is an empty string, this function does <b>nothing</b>.</p>
<p>Objects must register by this method first before they can be recording by spyInput. A common place for this function is inside a constructor. </p>

</div>
</div>
<a class="anchor" id="gaf807cf9dc9b94d113b5391536a559e7d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void spyTryTestAutomation </td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start record/replay. </p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="../../d1/d1d/group__spy.html#ga041506954b48f99c57dc8f70b6a6b2da" title="record/replay is start or not ">spyIsTesting</a></dd></dl>
<p>Without calling this function, record/replay won't start. Please call this function as early as possible, e.g. in the main function. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Jul 23 2013 17:59:54 for xTitan by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.4
</small></address>
</body>
</html>
